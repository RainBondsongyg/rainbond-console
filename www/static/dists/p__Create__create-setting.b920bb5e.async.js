(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{EK8P:function(e,t,a){"use strict";var s=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var l,n,p,o=s(a("2/Rp")),r=a("MuoO"),d=a("7DNP"),c=i(a("q1tI")),h=a("LLXN"),m=s(a("vGHg")),u=s(a("q76B")),f=s(a("QDog")),g=s(a("n9hB")),_=s(a("hMqj")),D=(l=(0,r.connect)(e=>{var t=e.loading,a=e.teamControl;return{buildAppsLoading:t.effects["createApp/buildApps"],deleteAppLoading:t.effects["appControl/deleteApp"],currentTeamPermissionsInfo:a.currentTeamPermissionsInfo}},null,null,{withRef:!0}),l((p=class extends c.PureComponent{constructor(e){super(e),this.handlePermissions=(e=>{var t=this.props.currentTeamPermissionsInfo;return _.default.querySpecifiedPermissionsInfo(t,e)}),this.loadDetail=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,s=t.app_alias;e({type:"appControl/fetchDetail",payload:{team_name:a,app_alias:s},callback:e=>{this.setState({appDetail:e})},handleError:e=>{var t=g.default.getCode(e);t&&404===t&&this.handleJump("exception/404")}})}),this.handleBuild=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,s=t.app_alias;e({type:"createApp/buildApps",payload:{team_name:a,app_alias:s},callback:t=>{t&&(e({type:"global/fetchGroups",payload:{team_name:a}}),this.handleJump("components/".concat(s,"/overview")))}})}),this.handleDelete=(()=>{var e=this.props.dispatch,t=this.fetchParameter(),a=t.team_name,s=t.app_alias;e({type:"appControl/deleteApp",payload:{team_name:a,app_alias:s,is_force:!0},callback:()=>{e({type:"global/fetchGroups",payload:{team_name:a}}),this.handleJump("index")}})}),this.handleJump=(e=>{var t=this.props.dispatch,a=this.fetchParameter(),s=a.team_name,i=a.region_name;t(d.routerRedux.replace("/team/".concat(s,"/region/").concat(i,"/").concat(e)))}),this.showDelete=(()=>{this.setState({showDelete:!0})}),this.fetchParameter=(()=>{return{team_name:f.default.getCurrTeamName(),region_name:f.default.getCurrRegionName(),app_alias:this.getAppAlias()}}),this.state={appPermissions:this.handlePermissions("queryAppInfo"),appDetail:null}}componentDidMount(){this.loadDetail()}componentWillUnmount(){this.props.dispatch({type:"appControl/clearDetail"})}getAppAlias(){return this.props.match.params.appAlias}render(){var e=this.props,t=e.buildAppsLoading,a=e.deleteAppLoading,s=this.state,i=s.showDelete,l=s.appPermissions.isDelete,n=this.state.appDetail||{};return n.service?c.default.createElement("div",null,c.default.createElement("h2",{style:{textAlign:"center"}},(0,h.formatMessage)({id:"componentCheck.advanced.setup"})),c.default.createElement("div",{style:{overflow:"hidden"}},c.default.createElement(m.default,{updateDetail:this.loadDetail,appDetail:n}),c.default.createElement("div",{style:{background:"#fff",padding:"20px",textAlign:"right",position:"fixed",bottom:0,left:0,right:0,zIndex:2,borderTop:"1px solid #e8e8e8"}},c.default.createElement(o.default,{loading:t,style:{marginRight:8},onClick:this.handleBuild,type:"primary"},(0,h.formatMessage)({id:"button.confirm_create"})),l&&c.default.createElement(o.default,{onClick:this.showDelete,type:"default"},(0,h.formatMessage)({id:"button.abandon_create"}))),i&&c.default.createElement(u.default,{loading:a,onOk:this.handleDelete,title:(0,h.formatMessage)({id:"confirmModal.abandon_create.create_check.title"}),subDesc:(0,h.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),desc:(0,h.formatMessage)({id:"confirmModal.delete.create_check.desc"}),onCancel:()=>{this.setState({showDelete:!1})}}))):null}},n=p))||n);t.default=D}}]);