(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[68],{FcSy:function(e,t,a){e.exports={action:"action___3Fw7O",tooltip_style:"tooltip_style___2qLqq",loadingStyle:"loadingStyle___3yZ-k"}},"Fw1+":function(e,t,a){"use strict";var s=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bbsP");var n=s(a("/wGt"));a("IzEo");var d=s(a("bx4M"));a("g9YV");var o=s(a("wCAj"));a("T2oS");var i=s(a("W9HT"));a("+L6B");var r=s(a("2/Rp"));a("Q9mQ");var c=s(a("diRs"));a("/xke");var u=s(a("TeRw"));a("y8nQ");var m,f,g,p=s(a("Vl3Y")),h=s(a("XZXw")),b=l(a("q1tI")),y=a("LLXN"),C=s(a("QDog")),M=s(a("ZNrE")),v=a("CC/n"),_=s(a("q76B")),E=s(a("FcSy")),w=(m=p.default.create(),m((g=class extends b.PureComponent{constructor(e){super(e),this.getPageContent=(()=>{var e=C.default.getCurrTeamName(),t=C.default.getAppID();(0,v.getKubernetesVal)({team_name:e,app_id:t}).then(e=>{e&&e.response_data&&200==e.response_data.code&&this.setState({content:e.list,localContent:"",loadingSwitch:!1})})}),this.onClose=(()=>{this.setState({visible:!1,isSubmit:!0,type:"add"})}),this.handleConfigurationOperation=(()=>{this.setState({visible:!0,title:(0,y.formatMessage)({id:"addKubenetesResource.btn.add"}),type:"add",localContent:(0,y.formatMessage)({id:"addKubenetesResource.localContent.yaml"})})}),this.handleSubmit=(()=>{var e=this.props.form;e.validateFields((e,t)=>{var a={yaml:t.yaml};t.yaml?this.handelAddOrEdit(a):u.default.error({message:(0,y.formatMessage)({id:"notification.hint.resource.msg"})})})}),this.editButton=((e,t)=>{this.setState({type:e,visible:!0,editName:t.name,localContent:t.content,editId:t.ID,title:(0,y.formatMessage)({id:"addKubenetesResource.table.btn.edit"})})}),this.editErrButton=((e,t)=>{this.setState({title:"yaml",visible:!0,localContent:t.content,isSubmit:!1})}),this.deleteButton=(e=>{this.setState({showDeletePort:!this.state.showDeletePort}),this.setState({deleteVal:e})}),this.handleDel=(()=>{var e=this.state.deleteVal,t=C.default.getCurrTeamName(),a=C.default.getAppID();(0,v.delSingleKubernetesVal)({team_name:t,app_id:a,yaml:e.content,list_name:e.name,List_id:e.ID}).then(e=>{e&&e.response_data&&200==e.response_data.code&&(u.default.success({message:(0,y.formatMessage)({id:"notification.success.delete"})}),this.getPageContent())}),this.setState({showDeletePort:!this.state.showDeletePort,visible:!1})}),this.cancalDeletePort=(()=>{this.setState({showDeletePort:!this.state.showDeletePort})}),this.handelAddOrEdit=(e=>{var t=C.default.getCurrTeamName(),a=C.default.getAppID(),s=this.state,l=(s.selectval,s.type),n=s.editId;"add"==l?(0,v.addSingleKubernetesVal)({team_name:t,app_id:a,yaml:e.yaml}).then(e=>{e&&e.response_data&&200==e.response_data.code?(u.default.success({message:(0,y.formatMessage)({id:"notification.success.add"})}),this.getPageContent()):(u.default.error({message:(0,y.formatMessage)({id:"notification.error.add"})}),this.getPageContent())}):"edit"==l&&(0,v.editSingleKubernetesVal)({team_name:t,app_id:a,list_name:this.state.editName,yaml:e.yaml,List_id:n}).then(e=>{e&&e.response_data&&200==e.response_data.code?(u.default.success({message:(0,y.formatMessage)({id:"notification.success.change"})}),this.getPageContent()):(u.default.error({message:(0,y.formatMessage)({id:"notification.error.change"})}),this.getPageContent())}),this.setState({visible:!1})}),this.state={visible:!1,content:[],localContent:"",type:"add",title:(0,y.formatMessage)({id:"addKubenetesResource.btn.add"}),showDeletePort:!1,deleteVal:{},editName:"",editId:0,isSubmit:!0,loadingSwitch:!0,TooltipValue:(0,y.formatMessage)({id:"addKubenetesResource.localContent.yaml"})}}componentDidMount(){this.getPageContent()}render(){var e=this.props.form,t=e.getFieldDecorator,a=e.setFieldsValue,s=this.state,l=s.content,u=s.localContent,m=s.title,f=s.isSubmit,g=s.loadingSwitch,C=s.TooltipValue,v=s.type,w="add"==v,R={labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}},S={labelCol:{xs:{span:24},sm:{span:24}},wrapperCol:{xs:{span:24},sm:{span:24}}},D=[{title:(0,y.formatMessage)({id:"addKubenetesResource.table.name"}),dataIndex:"name",key:"name",align:"center",width:300},{title:(0,y.formatMessage)({id:"addKubenetesResource.table.type"}),dataIndex:"kind",key:"kind",align:"center",width:200},{title:(0,y.formatMessage)({id:"addKubenetesResource.table.status"}),dataIndex:"state",key:"state",align:"center",width:200,render:(e,t)=>{return b.default.createElement("div",null,1==e&&b.default.createElement("span",{style:{color:"green"}},(0,y.formatMessage)({id:"addKubenetesResource.table.success"})),2==e&&b.default.createElement("span",{style:{color:"green"}},(0,y.formatMessage)({id:"addKubenetesResource.table.update_success"})),3==e&&b.default.createElement(b.default.Fragment,null,b.default.createElement("span",{style:{color:"red"}},(0,y.formatMessage)({id:"addKubenetesResource.table.error"})),b.default.createElement(c.default,{overlayClassName:E.default.tooltip_style,placement:"bottom",title:(0,y.formatMessage)({id:"addKubenetesResource.table.errorDetail"}),content:t.error_overview,trigger:"click"},b.default.createElement("span",{style:{marginLeft:"20px",color:"#5672ac",cursor:"pointer"}},(0,y.formatMessage)({id:"addKubenetesResource.table.checkDetail"})))),4==e&&b.default.createElement("div",null,b.default.createElement("span",{style:{color:"red"}},(0,y.formatMessage)({id:"addKubenetesResource.table.update_error"})),b.default.createElement(c.default,{overlayClassName:E.default.tooltip_style,placement:"bottom",title:(0,y.formatMessage)({id:"addKubenetesResource.table.errorDetail"}),content:t.error_overview,trigger:"click"},b.default.createElement("span",{style:{marginLeft:"20px",color:"#5672ac",cursor:"pointer"}},(0,y.formatMessage)({id:"addKubenetesResource.table.checkDetail"})))))}},{title:(0,y.formatMessage)({id:"addKubenetesResource.table.operate"}),dataIndex:"content",key:"content",align:"center",width:200,render:(e,t)=>{return b.default.createElement(b.default.Fragment,null,3===t.state?b.default.createElement("span",{className:E.default.action,onClick:()=>this.editErrButton("edit",t),style:{marginRight:"10px"}},(0,y.formatMessage)({id:"addKubenetesResource.table.btn.check"})):b.default.createElement("span",{className:E.default.action,onClick:()=>this.editButton("edit",t),style:{marginRight:"10px"}},(0,y.formatMessage)({id:"addKubenetesResource.table.btn.edit"})),b.default.createElement("span",{className:E.default.action,onClick:()=>this.deleteButton(t)},(0,y.formatMessage)({id:"addKubenetesResource.table.btn.delete"})))}}];return b.default.createElement(h.default,{title:(0,y.formatMessage)({id:"addKubenetesResource.title"}),content:(0,y.formatMessage)({id:"addKubenetesResource.desc"})},b.default.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"24px"}},b.default.createElement(r.default,{type:"primary",icon:"plus",onClick:()=>{this.handleConfigurationOperation()}},(0,y.formatMessage)({id:"addKubenetesResource.btn.add"}))),b.default.createElement(d.default,null,g?b.default.createElement("div",{className:E.default.loadingStyle},b.default.createElement(i.default,{size:"large"})):b.default.createElement(o.default,{dataSource:l,columns:D})),b.default.createElement(n.default,{title:m,placement:"right",width:"400",onClose:this.onClose,visible:this.state.visible},b.default.createElement(p.default,R,b.default.createElement(M.default,{setFieldsValue:a,Form:p.default,style:{marginBottom:"20px"},getFieldDecorator:t,formItemLayout:S,name:"yaml",message:(0,y.formatMessage)({id:"notification.hint.confiuration.editContent"}),data:u||"",mode:"yaml",TooltipValue:C,bool:w})),b.default.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},b.default.createElement(r.default,{onClick:this.onClose,style:{marginRight:8}},(0,y.formatMessage)({id:"button.cancel"})),f&&b.default.createElement(r.default,{onClick:this.handleSubmit,type:"primary"},(0,y.formatMessage)({id:"button.confirm"})))),this.state.showDeletePort&&b.default.createElement(_.default,{title:(0,y.formatMessage)({id:"confirmModal.delete.resource.title"}),desc:(0,y.formatMessage)({id:"confirmModal.delete.resource.desc"}),subDesc:(0,y.formatMessage)({id:"confirmModal.delete.strategy.subDesc"}),onOk:this.handleDel,onCancel:this.cancalDeletePort}))}},f=g))||f),R=w;t.default=R}}]);